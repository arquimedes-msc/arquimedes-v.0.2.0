## 2024-08-05 - Enforced Secure JWT Secret Configuration
**Vulnerability:** The application's JWT secret (`JWT_SECRET`) defaulted to an empty string if not set in the environment variables. This critical vulnerability would allow an attacker to easily forge authentication tokens by signing them with an empty secret, granting unauthorized access to the application. Additionally, a weak, hardcoded secret was found in a deployment script.
**Learning:** The application was not designed to "fail securely." Instead of halting when a critical security component was misconfigured, it continued to operate in an insecure state. This highlights the importance of validating critical environment variables at startup.
**Prevention:** For all security-critical secrets (like JWT keys, API keys, etc.), implement a startup check in the application's entry point. This check should validate that the secret exists and meets minimum strength requirements (e.g., length). If the check fails, the application must throw a fatal error and refuse to start, preventing it from ever running in a vulnerable state.

## 2025-02-12 - Secured Markdown Rendering with Sanitization
**Vulnerability:** The application used `rehype-raw` in `MathContent.tsx` to render Markdown content, which allows raw HTML execution. This creates a high-risk Cross-Site Scripting (XSS) vector if user-controlled content is rendered, as malicious scripts could be injected.
**Learning:** Rendering raw HTML from Markdown (`rehype-raw`) must always be paired with a sanitization step (`rehype-sanitize`). Assuming content is "safe" because it comes from the database is insufficient; defense-in-depth requires validating/sanitizing at the point of rendering.
**Prevention:** Enforce the usage of `rehype-sanitize` immediately after `rehype-raw` in the plugin chain. Configure the sanitizer schema to explicitly allow only necessary tags and attributes (e.g., `className` for styling), blocking everything else by default.
